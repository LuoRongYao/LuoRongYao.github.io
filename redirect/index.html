<!DOCTYPE html><html lang="zh-CN"> <head><!-- Global Meta --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Redirect</title><meta name="description" content="Redirect - Redirect Website"><meta name="keywords" content="Astro, Theme, Yi"><meta name="author" content="Spencer Woo"><meta name="generator" content="Astro v4.10.2"><!-- Open Graph --><meta property="og:title" content="Redirect"><meta property="og:description" content="Redirect - Redirect Website"><meta property="og:image" content="https://marxchou.com/cover.png"><meta property="og:image:alt" content="Redirect"><meta property="og:url" content="https://marxchou.com/redirect/"><meta property="og:type" content="website"><meta property="og:site_name" content="Spencer Woo"><meta property="og:locale" content="zh-CN"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Redirect"><meta name="twitter:description" content="Redirect - Redirect Website"><meta name="twitter:image" content="https://marxchou.com/cover.png"><meta name="twitter:image:alt" content="Redirect"><meta name="twitter:url" content="https://marxchou.com/redirect/"><meta name="twitter:creator" content="@Spencer Woo"><meta name="twitter:site" content="Spencer's Blog"><!-- 浏览器和搜索引擎相关 --><meta name="robots" content="index, follow"><meta http-equiv="Content-Language" content="zh-CN"><meta name="theme-color" content="#8D46E7"><meta name="x-astro-vitals-route" content="/"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS"><link rel="canonical" href="https://marxchou.com/redirect/"><!-- Favicon --><link rel="shortcut icon" type="image/svg+xml" href="https://marxchou.com/favicon.svg"><!-- Analytics --><script type="text/partytown" src="https://umami.marxchou.com/script.js" defer data-website-id="73b29141-fccf-4d54-9c2f-f7d0d146f86b"></script><!-- Style / Scripts --><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/hoisted.CMKAAEoH.css">
<style>a{text-decoration:none;color:var(--main-font-color)}main{min-height:66dvh;display:flex;flex-direction:column;align-items:center;justify-content:center}.redirect{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:1rem;padding:2rem;max-width:calc(var(--content-width) / 3 * 2);background-color:var(--bg-content-color);border:1px solid var(--border-color)}.redirect .tip{display:flex;justify-content:center;margin-bottom:2rem;opacity:.4}.redirect #url{display:block;padding:12px 20px;border-radius:8px;width:100%;text-align:center;color:var(--link-color);border:1px solid var(--border-color);background-color:var(--bg-color)}.redirect #site-info{display:inline-flex;width:100%;flex-direction:row;align-items:center;justify-content:center;margin-top:20px;font-size:18px}.redirect #jump-content.warn{color:var(--cb-color-warning)}.redirect #jump-content.safe{color:var(--cb-color-note)}.redirect #jump-content.danger{color:var(--cb-color-danger)}.redirect #jump-button{display:flex;align-items:center;justify-content:center;height:44px;width:160px;margin:30px auto 0;border-radius:8px;color:var(--main-font-color);background-color:var(--border-color);transition:background-color .3s;cursor:pointer}.redirect #jump-button:hover{background-color:var(--bg-color)}
</style>
<link rel="stylesheet" href="/_astro/_slug_.CCFqlUjP.css"><script type="module" src="/_astro/hoisted.BSMSWknI.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");e.newDocument.body.append(r)})})(document);</script></head><body> <div id="app"> <header id="nprogress-container" class="header" data-astro-cid-3ef6ksr2> <div class="fullwidth" data-astro-cid-3ef6ksr2> <div class="header__left" data-astro-cid-3ef6ksr2> <span id="sitename" data-astro-cid-tvrurpns></span> <a class="logo" href="/" data-astro-cid-tvrurpns> <span class="logo__text" data-astro-cid-tvrurpns><img src="https://marxchou.com/logo.svg" alt="Blog Logo" width="24" data-astro-cid-tvrurpns>Spencer&#39;s Blog</span> </a>  </div> <div class="header__right" data-astro-cid-3ef6ksr2> <div id="docsearch"></div>  <button id="theme-btn" role="button" aria-label="Toggle dark/light" class="toggle-theme" data-astro-cid-cp4oi4cm> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-sun" data-astro-cid-cp4oi4cm data-icon="tabler:sun">  <symbol id="ai:tabler:sun"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"/></symbol><use xlink:href="#ai:tabler:sun"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-moon" data-astro-cid-cp4oi4cm data-icon="tabler:moon-stars">  <symbol id="ai:tabler:moon-stars"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992zm5 1a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2m2 7h2m-1-1v2"/></symbol><use xlink:href="#ai:tabler:moon-stars"></use>  </svg> </button>    </div> </div> </header>  <main class="main">  <div class="redirect"> <span class="tip" id="tip">您即将离开Spencer&#39;s Blog，前往</span> <span id="url"></span> <div id="jump-content" class="warn"> <span id="site-info">⚠️ 该网址安全性未知，请注意您的帐号和财产安全</span> <div id="jump-button">继续前往</div> </div> </div> <script>
    // 跳转网址
    let jumpLink
    let interval
    // 获取元素
    const tipDescription = document.getElementById('tip')
    const urlDom = document.getElementById('url')
    const urlTip = document.getElementById('site-info')
    const jumpContent = document.getElementById('jump-content')
    const jumpButton = document.getElementById('jump-button')
    // 网址白名单
    const whitelist = ['*.marxchou.com', '*.mch.icu', 'github.com', 't.me'] 
    // 网址黑名单
    const blacklist = ['*.taobao.com', '*.jd.com']
    // 提示文本
    const tipText = {
      safe: '✅ 该网址为信任网址，即将跳转',
      danger: '⛔ 该网址处于黑名单',
    }
    // 自动跳转
    const autoJump = () => {
      let count = 5
      const updateContent = () => {
        jumpButton.innerHTML = `${count} 秒后自动跳转`
        count--
        if (count < 0) {
          clearInterval(interval)
          jumpButton.innerHTML = '正在跳转'
          window.location.replace(jumpLink)
        }
      }
      // 每秒更新一次
      updateContent()
      interval = setInterval(updateContent, 1000)
    }
    // 获取跳转网址
    const getJumpUrl = () => {
      try {
        // 解析 URL 参数
        const urlParams = new URLSearchParams(window.location.search)
        const encodedUrl = urlParams.get('url')
        if (!encodedUrl) {
          throw new Error('URL 参数为空')
        }
        // 解密 Base64
        jumpLink = atob(encodedUrl)
        // 如果 URL 以 "//" 开头，添加默认协议
        if (jumpLink.startsWith('//')) {
          jumpLink = 'https:' + jumpLink
        }
        urlDom.innerHTML = jumpLink
        // 获取网址的主机名
        const urlHostname = new URL(jumpLink).hostname
        // 判断网址是否在黑名单中
        for (let i = 0; i < blacklist.length; i++) {
          const blackPattern = blacklist[i].replace(/\*/g, '.*')
          if (urlHostname.match(blackPattern)) {
            // 显示提示信息
            urlTip.innerHTML = tipText.danger
            jumpButton.innerHTML = '禁止跳转'
            jumpButton.style.cursor = 'not-allowed'
            jumpButton.style.pointerEvents = 'none'
            jumpButton.style.opacity = '0.4'
            jumpContent.className = 'danger'
            return true
          }
        }
        // 判断网址是否在白名单中
        for (let i = 0; i < whitelist.length; i++) {
          const whitePattern = whitelist[i].replace(/\*/g, '.*')
          if (urlHostname.match(whitePattern)) {
            // 显示提示信息
            urlTip.innerHTML = tipText.safe
            jumpContent.className = 'safe'
            autoJump()
            return true
          }
        }
      } catch (error) {
        console.error('Error during URL parsing:', error)
        tipDescription.remove()
        jumpContent.remove()
        urlDom.innerHTML = '获取跳转链接失败'
        const sorryMessage = document.createElement('span')
        sorryMessage.className = 'tip'
        sorryMessage.innerHTML = '😔 非常抱歉'
        urlDom.parentElement.insertBefore(sorryMessage, urlDom)

      }
    }
    document.addEventListener('contextmenu', function (event) {
      event.preventDefault()
    })
    document.addEventListener('keydown', function (event) {
    if (event.key === 'F12') {
        event.preventDefault()
    }
    if (event.ctrlKey && event.shiftKey && (event.key === 'I' || event.key === 'C' || event.key === 'G')) {
        event.preventDefault()
    }
    })
    jumpButton.addEventListener('click', () => {
      clearInterval(interval)
      jumpButton.innerHTML = '正在跳转'
      if (jumpLink) window.location.replace(jumpLink)
    })
    window.addEventListener('DOMContentLoaded', () => {
      getJumpUrl()
    })
  </script>  </main> <footer class="footer" data-astro-cid-sz7xmlte> <div class="footer__copyright" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>© 2017 - 2024.&nbsp;All rights reserved</span></div> <div class="footer__links" data-astro-cid-sz7xmlte><a href="https://beian.miit.gov.cn" target="_blank" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>豫ICP备20006179号</span></a></div> <div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Analytics by</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:umami">  <symbol id="ai:simple-icons:umami"><path fill="currentColor" d="M2.203 8.611H.857a.845.845 0 0 0-.841.841v.858a13 13 0 0 0-.016.6c0 6.627 5.373 12 12 12c6.527 0 11.837-5.212 11.996-11.701c0-.025.004-.05.004-.075V9.452a.845.845 0 0 0-.841-.841h-1.346c-1.159-4.329-5.112-7.521-9.805-7.521S3.363 4.282 2.203 8.611m18.444 0H3.37c1.127-3.702 4.57-6.399 8.638-6.399c4.069 0 7.512 2.697 8.639 6.399"/></symbol><use xlink:href="#ai:simple-icons:umami"></use>  </svg> <a href="//umami.is" data-astro-cid-sz7xmlte>Umami</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Runs on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:astro">  <symbol id="ai:simple-icons:astro"><path fill="currentColor" d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.16 3.16 0 0 1-1.407-1.188a3.3 3.3 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614s.57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727z"/></symbol><use xlink:href="#ai:simple-icons:astro"></use>  </svg> <a href="//astro.build" data-astro-cid-sz7xmlte>Astro</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Deployed on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:vercel">  <symbol id="ai:simple-icons:vercel"><path fill="currentColor" d="M24 22.525H0l12-21.05z"/></symbol><use xlink:href="#ai:simple-icons:vercel"></use>  </svg> <a href="//vercel.com" data-astro-cid-sz7xmlte>Vercel</a> </div> <div id="rss-stats" data-astro-cid-sz7xmlte>
&nbsp;&nbsp;
<a href="/rss.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>RSS</span></a> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="tabler:point-filled">  <symbol id="ai:tabler:point-filled"><path fill="currentColor" d="M12 7a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7"/></symbol><use xlink:href="#ai:tabler:point-filled"></use>  </svg> <a href="/sitemap-index.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>Sitemap</span></a> </div> </footer>  </div> <script>
            document.addEventListener('astro:page-load', () => {
                try {
                    // 是否启用
                    const enable = true; // 设为true以启用跳转功能
                    if (!enable) return;
                    // 中转页地址
                    const redirectPage = "/redirect/?url=";
                    // 包含的 className
                    const includeClass = ['post__content']; // 添加需要包含的类名
                    // 判断元素或其父元素是否包含指定类名
                    const hasIncludeClass = (element) => {
                        while (element) {
                            if (includeClass.some(className => element.classList.contains(className))) {
                                return true;
                            }
                            element = element.parentElement;
                        }
                        return false;
                    };
                    // 所有链接
                    const allLinks = [...document.getElementsByTagName("a")];
                    if (allLinks.length === 0) return;
                    allLinks.forEach((link) => {
                        // 检查链接是否包含 target="_blank" 属性或指定的类名
                        if (link.getAttribute("target") === "_blank" || hasIncludeClass(link)) {
                            const linkHref = link.getAttribute("href");
                            // 存在链接且非中转页
                            if (linkHref && !linkHref.includes(redirectPage)) {
                                // Base64 编码 href
                                const encodedHref = btoa(linkHref);
                                const redirectLink = `${redirectPage}${encodedHref}`;
                                // 保存原始链接
                                link.setAttribute("original-href", linkHref);
                                // 覆盖 href
                                link.setAttribute("href", redirectLink);
                                // 增加 target="_blank" 属性
                                link.setAttribute("target", "_blank");
                            }
                        }
                    });
                } catch (error) {
                    console.error("处理链接时出错：", error);
                }
            });
        </script> </body> </html>