<!DOCTYPE html><html lang="zh-CN"> <head><!-- Global Meta --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - Spencer&#39;s Blog</title><meta name="description" content="VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - 为了解决 GitHub 无法渲染 LaTeX 数学公式的问题，我们编写了一个 VS Code 插件。"><meta name="keywords" content="Astro, Theme, Yi"><meta name="author" content="Spencer Woo"><meta name="generator" content="Astro v4.10.2"><!-- Open Graph --><meta property="og:title" content="VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - Spencer's Blog"><meta property="og:description" content="VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - 为了解决 GitHub 无法渲染 LaTeX 数学公式的问题，我们编写了一个 VS Code 插件。"><meta property="og:image" content="https://marxchou.com/assets/postImage/vscode-math-to-image.png"><meta property="og:image:alt" content="vscode-math-to-image"><meta property="og:url" content="https://marxchou.com/archives/vscode-math-to-image/"><meta property="og:type" content="website"><meta property="og:site_name" content="Spencer Woo"><meta property="og:locale" content="zh-CN"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - Spencer's Blog"><meta name="twitter:description" content="VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 - 为了解决 GitHub 无法渲染 LaTeX 数学公式的问题，我们编写了一个 VS Code 插件。"><meta name="twitter:image" content="https://marxchou.com/assets/postImage/vscode-math-to-image.png"><meta name="twitter:image:alt" content="vscode-math-to-image"><meta name="twitter:url" content="https://marxchou.com/archives/vscode-math-to-image/"><meta name="twitter:creator" content="@Spencer Woo"><meta name="twitter:site" content="Spencer's Blog"><!-- 浏览器和搜索引擎相关 --><meta name="robots" content="index, follow"><meta http-equiv="Content-Language" content="zh-CN"><meta name="theme-color" content="#8D46E7"><meta name="x-astro-vitals-route" content="/"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS"><link rel="canonical" href="https://marxchou.com/archives/vscode-math-to-image/"><!-- Favicon --><link rel="shortcut icon" type="image/svg+xml" href="https://marxchou.com/favicon.svg"><!-- Analytics --><script type="text/partytown" src="https://umami.marxchou.com/script.js" defer data-website-id="73b29141-fccf-4d54-9c2f-f7d0d146f86b"></script><!-- Style / Scripts --><script type="text/partytown" src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.2.2/es5/tex-chtml.min.js"></script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/hoisted.iYpLhLcB.css">
<link rel="stylesheet" href="/_astro/hoisted.CMKAAEoH.css">
<link rel="stylesheet" href="/_astro/_slug_.CCFqlUjP.css">
<style>:root{--B0: #fff;--B10: #f8f8f9;--B20: #f7f7f8;--B30: #efefef;--B40: #e5e5e5;--B60: #8e8787;--B80: #655e5e;--B100: #292525;--green: #3fd67e;--red: #fd281a;--sspai-red: #d71a1b;--blue: #44b9fb;--pink: #ff2c78;--white: #f4f4f4;--orange: #fc7310;--prime-blue: #0355e3;--B80-t: #8e8787;--B60-t: #655e5e}html[data-theme=dark]:root{color-scheme:dark;--B0: #232222;--B10: #272626;--B20: #171514;--B30: #2b2929;--B40: #373737;--B60: #7f7f7f;--B80: #cac3c3;--B100: #fff;--green: #57ef96;--red: #f94135;--sspai-red: #d71a1b;--blue: #44b9fb;--pink: #ed638c;--white: #171514;--orange: #ee6c35;--prime-blue: #3577e8;--B60-t: #fafafa;--B80-t: #7f7f7f}:root{--a-dur-default: .36s;--a-func-default: cubic-bezier(.5, 0, 0, 1);--a-dur-short: .15s;--a-func-short: cubic-bezier(0, 0, 0, 1)}.toc__content{position:fixed;left:calc((100vw - min(100vw,664px))/2 + min(100vw,664px) + 178px);top:500px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:90;padding:10px 0;width:auto;max-height:600px;overflow:hidden}@media screen and (max-width: 1440px){.toc__content{left:calc(100vw - 200px)}}@media screen and (max-width: 1280px){.toc__content{display:none}}.toc__content:hover{overflow:auto}.toc__content:hover .toc-list-item .toc-link{display:inline-block;opacity:1;cursor:pointer}.toc__content .toc-list-item{text-align:left;margin-bottom:0}.toc__content .toc-list-item .toc-link{font-size:12px;line-height:17px;color:var(--B80-t);display:inline-block;opacity:0;width:auto;vertical-align:middle;text-align:left;-webkit-transition:opacity .5s;transition:opacity .5s;margin-top:-2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px}.toc__content .toc-list-item .toc-link:hover{color:var(--B60-t);display:inline-block;opacity:1;cursor:pointer}.toc__content .toc-list-item .toc-link{margin-left:8px}html[data-theme=dark] .toc__content .toc-list-item .toc-link{color:var(--B80-t)}html[data-theme=dark] .toc__content .toc-list-item .toc-link:hover{color:var(--B60-t)}ol{list-style-type:none}.toc__content{overflow-y:auto}.toc__content>.toc-list{overflow:hidden;position:relative}.toc__content>.toc-list li{list-style:none}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all .3s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed!important;top:0}.is-active-link{font-weight:800}.donate[data-astro-cid-wzkneuyl]{margin-top:1rem}.esa-sponsor[data-astro-cid-wzkneuyl]{position:relative;width:100%;margin:40px 0}.esa-sponsor[data-astro-cid-wzkneuyl] .qrshow[data-astro-cid-wzkneuyl]{position:absolute;width:200px;height:200px;cursor:pointer;left:calc(50% - 100px);top:-170px;z-index:999;display:none;box-shadow:0 1px 15px #1b1f2326,0 0 1px #6a737d59}.tip[data-astro-cid-wzkneuyl]{display:flex;align-items:center;justify-content:center;margin-top:1rem;margin-bottom:1rem}.donate-text[data-astro-cid-wzkneuyl]{display:flex;align-items:center;justify-content:center}.alipay[data-astro-cid-wzkneuyl]{padding:.5rem;border-width:1px;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}.wechatpay[data-astro-cid-wzkneuyl]{padding:.5rem;border-top-width:.5rem;border-bottom-width:1px}.paypal[data-astro-cid-wzkneuyl]{padding:.5rem;border-width:1px;border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}@media screen and (max-width: 650px){.donate[data-astro-cid-wzkneuyl]{display:none}}#content_progress[data-astro-cid-hxbu2e7d]{position:fixed;left:0;top:0;z-index:1000;width:100%;height:2px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:transparent;color:#2ea997}#content_progress[data-astro-cid-hxbu2e7d]::-webkit-progress-bar{background-color:transparent}#content_progress[data-astro-cid-hxbu2e7d]::-webkit-progress-value{background-color:var(--progress-color, #2ea997)}#content_progress[data-astro-cid-hxbu2e7d]::-moz-progress-bar{background-color:var(--progress-color, #2ea997)}
#back-to-top[data-astro-cid-wlspcwf4]{display:none}#back-to-top[data-astro-cid-wlspcwf4].active{display:block}
#waline[data-astro-cid-6z674vj5]{min-height:38rem;max-width:var(--content-width);position:relative;overflow:hidden;margin:0 auto;padding:0 var(--space)}@media screen and (max-width: 650px){#waline[data-astro-cid-6z674vj5]{padding:unset}}html[data-theme=dark]{--waline-color: #ced8de !important}
</style><script type="module" src="/_astro/hoisted.9XIBcYVo.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");e.newDocument.body.append(r)})})(document);</script></head><body> <div id="app"> <header id="nprogress-container" class="header" data-astro-cid-3ef6ksr2> <div class="fullwidth" data-astro-cid-3ef6ksr2> <div class="header__left" data-astro-cid-3ef6ksr2> <span id="sitename" data-astro-cid-tvrurpns></span> <a class="logo" href="/" data-astro-cid-tvrurpns> <span class="logo__text" data-astro-cid-tvrurpns><img src="https://marxchou.com/logo.svg" alt="Blog Logo" width="24" data-astro-cid-tvrurpns>Spencer&#39;s Blog</span> </a>  </div> <div class="header__right" data-astro-cid-3ef6ksr2> <div id="docsearch"></div>  <button id="theme-btn" role="button" aria-label="Toggle dark/light" class="toggle-theme" data-astro-cid-cp4oi4cm> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-sun" data-astro-cid-cp4oi4cm data-icon="tabler:sun">  <symbol id="ai:tabler:sun"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"/></symbol><use xlink:href="#ai:tabler:sun"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-moon" data-astro-cid-cp4oi4cm data-icon="tabler:moon-stars">  <symbol id="ai:tabler:moon-stars"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992zm5 1a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2m2 7h2m-1-1v2"/></symbol><use xlink:href="#ai:tabler:moon-stars"></use>  </svg> </button>    </div> </div> </header>  <main class="main">  <progress id="content_progress" value="0" data-astro-cid-hxbu2e7d></progress> <div class="post-title" data-astro-cid-hxbu2e7d> <h1 class="post-title__text" data-astro-cid-hxbu2e7d> VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式 </h1> <div class="post-meta post-card__meta">
Posted 2020-08-04.&nbsp;
    Updated 2024-06-21.&nbsp;
<span id="word-count">1940 words.</span>&nbsp;
<span id="read-time">10 min read.</span>&nbsp;
<span class="waline-pageview-count" data-path="/archives/vscode-math-to-image/">0</span><span> views.&nbsp;</span> <span class="waline-comment-count" data-path="/archives/vscode-math-to-image/">0</span><span> messages.</span> </div> </div> <div class="post content-box" data-astro-cid-hxbu2e7d> <div class="post-card__header" data-astro-cid-hxbu2e7d> <picture> <source srcset="/_astro/vscode-math-to-image.DH8VuUn5_2wCf8t.avif" type="image/avif"><source srcset="/_astro/vscode-math-to-image.DH8VuUn5_Z1eaT4y.webp" type="image/webp"> <img src="/_astro/vscode-math-to-image.DH8VuUn5_Z1rMGgl.png" alt="vscode-math-to-image" class="post-card__image" loading="eager" width="1920" height="600" decoding="async"> </picture> </div> <div class="remark-aside remark-aside--danger" data-astro-cid-hxbu2e7d> <p style="margin-bottom: 1rem;" data-astro-cid-hxbu2e7d>
🌶 <strong data-astro-cid-hxbu2e7d>过期警告：</strong> 本页面距今已有
1417
天未更新，年久失修，内容可能有所偏颇，还请仔细甄别！
</p> </div> <div class="post__content" data-astro-cid-hxbu2e7d>  <aside aria-label="note" class="remark-aside remark-aside--note"><h4 class="remark-aside__title" aria-hidden="true" id="-同步发布"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="remark-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>🛹 同步发布</h4><div class="remark-aside__content"><ul>
<li><strong>在少数派上阅读本文</strong> —
<a href="https://sspai.com/post/61877">不支持 LaTeX 也能插入数学公式，这个小插件帮你实现「徒手渲染」</a>。</li>
<li><strong>Read the English version on Medium</strong> —<a href="https://medium.com/spencerweekly/vs-code-math-to-image-write-latex-math-equations-in-github-markdown-the-easy-way-9fa8b81dc910?source=friends_link&#x26;sk=cff035b443fb81f5b20a47370f23aed3">VS Code Math to Image: Write LaTeX Math Equations in GitHub Markdown the Easy Way!</a></li>
</ul></div></aside>
<p>作为每天都在跟数学公式打交道的工程师、数学家，如果我们想要将自己的学术成果开源并
发布在网络平台上，那么这个平台至少要支持在 Markdown 里面用 LaTeX 撰写公式。可
惜，想要直接在 Markdown 里面撰写数学公式就必须借助第三方库的帮助：比如 MathJax
和 KaTeX。</p>
<p>因此很多常见的平台都尚未支持 LaTeX 数学公式的渲染，GitHub 就是其中一员——作为可能
是世界上最大、最受欢迎的代码开源平台，GitHub 是很多研究人员开源自己学术成果的首
选。如果我们想要在 GitHub 的 README 等 Markdown 文件里面撰写数学公式，就必须寻找
别的办法。</p>
<p>非常幸运的是：GitHub 允许我们在 Markdown 里面直接插入 SVG 图片（以及 HTML）。这
也就意味着，我们可以先将手上的 LaTeX 数学公式渲染成 SVG，再手动将原来的数学公式
替换成 SVG 图片，**达成「徒手渲染 LaTeX 公式」的成就。**💪</p>
<p><img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_132840.png" alt="将 LaTeX 公式渲染为 SVG 后在 GitHub 上面的显示效果"></p>
<p>如何才能实现并自动化整个过程呢？为了尽量减少各位的麻烦，提升工作效率，我和同学专
门编写了一个 VS Code 插件，用来自动将我们在 VS Code 里面选择的数学公式转换成 SVG
图片，并自动嵌入原位置 —— <strong>VS Code Math to Image：</strong></p>
<ul>
<li>目前，项目已经开源在 GitHub 上
面：<a href="https://github.com/TeamMeow/vscode-math-to-image">GitHub — vscode-math-to-image</a>；</li>
<li>同时 VS Code 插件也发布到了 Visual Studio
Marketplace：<a href="https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image">VS Marketplace — Math to Image</a>；</li>
</ul>
<h2 id="插件安装">插件安装</h2>
<p>我们在 VS Code 的插件市场搜索 <code>vscode-math-to-image</code>，找到 Math to Image 点击安
装即可。直接访问
<a href="https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image">Visual Studio Marketplace</a>
点击 Install 也可以安装。</p>
<p><img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134114.png" alt="VS Code 插件市场搜索：vscode-math-to-image"></p>
<h2 id="插件使用">插件使用</h2>
<p>我们成功安装插件之后，就可以直接非常方便地用插件将公式转换成可以显示在 GitHub 里
面的 SVG 图片啦：</p>
<p><img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133321.gif" alt="使用 VSCode Math to Image 插件将公式渲染为 SVG"></p>
<p>具体来讲，比如上面演示动画里面的公式：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.5izl9.css"><script type="module" src="/_astro/ec.3zb7u.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="latex"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#6CB6FF">$$</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span style="--0:#F5776E">\ell</span><span style="--0:#6CB6FF"> = </span><span style="--0:#F5776E">\sum</span><span style="--0:#6CB6FF">_{i}^{N}(y_i - \hat{y}_i)^2 - ||w||_2^2</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span style="--0:#6CB6FF">$$</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="$$\ell = \sum_{i}^{N}(y_i - \hat{y}_i)^2 - ||w||_2^2$$"><div></div></button></div></figure></div>
<p>$$
\ell = \sum_{i}^{N}(y_i - \hat{y}_i)^2 - ||w||_2^2
$$</p>
<p>正常在 Markdown 中我们是会直接用上面的语法让支持渲染 LaTeX 的编辑器渲染公式的，
比如 VS Code 默认的 Markdown 预览视图就支持 LaTeX 数学公式的渲染。如果这一
Markdown 文件里面的公式需要在 GitHub 上显示，那么我们就需要用插件将公式渲染成
SVG。我们直接选择这三行 LaTeX 公式代码（包含第一行和第三行的 <code>$$</code>），右键并在菜
单中选择「Math » Image: Insert rendered equation (local)」或者「Math » Image:
Insert rendered equation (remote)」，之后插件就会将我们选中的公式自动注释掉，并
在下方添加相应的 SVG 图片引用。（插件里面 <code>local</code> 和 <code>remote</code> 两个选项工作原理不
同，请见后文。）</p>
<p><img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133228.png" alt="选择公式右键后在菜单中选择渲染选项"></p>
<p>此时，我们可以发现在 VS Code 的 Markdown 预览界面里面，SVG 图片形式的 LaTeX 公式
依旧能够成功渲染，同时这一公式在 GitHub 等仍然不支持 LaTeX 的平台也能正常展
现，nice！</p>
<h2 id="工作原理">工作原理</h2>
<p>所以，我们插件是如何将一个纯文本格式的 LaTeX 数学公式渲染为 SVG 图片的呢？前面提
到的 <code>remote</code> 和 <code>local</code> 又有怎样的区别呢？这里，我就简单讲解一下插件的渲染和工
作原理。</p>
<p>首先，插件的工作原理非常简单、极易理解，我们实际上就是通过某种方式，解析 LaTeX
撰写的数学公式并将之渲染为 SVG， <code>remote</code> 和 <code>local</code> 的不同之处就在于：</p>
<ul>
<li>前者是借助服务器渲染公式，生成的 SVG 存在于云端；</li>
<li>后者是直接在本地渲染公式，生成的 SVG 当然也保存于本地；</li>
</ul>
<p><img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133452.png" alt="VSCode Math to Image 插件的简单工作原理"></p>
<h3 id="将公式借助服务器渲染为云端-svg-图片">将公式借助服务器渲染为云端 SVG 图片</h3>
<p>虽然 GitHub 的 README 等 Markdown 文件里面并不支持 LaTeX 数学公式的渲染，但
是：**GitHub 确实会在 Jupyter notebook 里面解析并正常渲染 LaTeX 数学公式！**那既
然 GitHub 并没有引用第三方的渲染服务，它们究竟是怎样渲染数学公式的呢？答案
是：GitHub 有自己的 LaTeX 渲染服务器，我们给这一服务器一个格式正确的 LaTeX 公
式，服务器会直接给我们返回渲染好的 SVG 图片。</p>
<p>嚯，我们要的正好就是这个服务啊！所以，我们插件的 <code>remote</code> 选项，就是借助 GitHub
官方的 LaTeX 渲染服务器，将我们的 LaTeX 数学公式转换为云端 SVG 图片。简单来说，
比如下面这个标准正态分布公式：</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="latex"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#6CB6FF">$$</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span style="--0:#6CB6FF">P(x) = \frac{1}{</span><span style="--0:#F5776E">\sigma</span><span style="--0:#6CB6FF">\sqrt{2</span><span style="--0:#F5776E">\pi</span><span style="--0:#6CB6FF">}} e^{\frac{-(x-</span><span style="--0:#F5776E">\mu</span><span style="--0:#6CB6FF">)^2}{2</span><span style="--0:#F5776E">\sigma</span><span style="--0:#6CB6FF">^2}}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span style="--0:#6CB6FF">$$</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="$$P(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{\frac{-(x-\mu)^2}{2\sigma^2}}$$"><div></div></button></div></figure></div>
<p>$$
\Large P(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{\frac{-(x-\mu)^2}{2\sigma^2}}
$$</p>
<p>我们可以借助插件直接将其转换为用 GitHub 服务器渲染的 SVG 图片，并用 <code>&#x3C;img></code> 标签
插入 Markdown 之中：</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="html"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#ADBAC7">&#x3C;</span><span style="--0:#8DDB8C">div</span><span style="--0:#ADBAC7"> </span><span style="--0:#FF938A;--0fs:italic">align</span><span style="--0:#ADBAC7">=</span><span style="--0:#96D0FF">"center"</span><span style="--0:#ADBAC7">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">  </span></span><span style="--0:#ADBAC7">&#x3C;</span><span style="--0:#8DDB8C">img</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">src</span><span style="--0:#ADBAC7">=</span><span style="--0:#96D0FF">"https://render.githubusercontent.com/render/math?math=P(x)%20%3D%20%5Cfrac%7B1%7D%7B%5Csigma%5Csqrt%7B2%5Cpi%7D%7D%20e%5E%7B%5Cfrac%7B-(x-%5Cmu)%5E2%7D%7B2%5Csigma%5E2%7D%7D%0D"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">  </span></span><span style="--0:#ADBAC7">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span style="--0:#ADBAC7">&#x3C;/</span><span style="--0:#8DDB8C">div</span><span style="--0:#ADBAC7">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<div align=&#x22;center&#x22;>  <img    src=&#x22;https://render.githubusercontent.com/render/math?math=P(x)%20%3D%20%5Cfrac%7B1%7D%7B%5Csigma%5Csqrt%7B2%5Cpi%7D%7D%20e%5E%7B%5Cfrac%7B-(x-%5Cmu)%5E2%7D%7B2%5Csigma%5E2%7D%7D%0D&#x22;  /></div>"><div></div></button></div></figure></div>
<p>这样，我们原公式就被替换为用 GitHub 服务器渲染好的 SVG 图片：</p>
<figure>
  <img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134758.png" alt="标准正态分布公式（GitHub LaTeX 渲染服务器渲染得到的 SVG 图片）" width="300px">
  <figcaption>标准正态分布公式（GitHub LaTeX 渲染服务器渲染得到的 SVG 图片）</figcaption>
</figure>
<p>同时，由于渲染服务器正好是 GitHub 自己的，所以肯定不会出现被屏蔽、无法访问的现
象，非常靠谱。</p>
<h3 id="将公式在本地渲染并直接保存为-svg-图片">将公式在本地渲染并直接保存为 SVG 图片</h3>
<p>SVG 这一格式非常强大，不仅是矢量图的格式标准，我们还可以在其中添加动画等高级功
能。所以实际上，SVG 格式的图片会给网站带来一些安全隐患，也正因为 SVG 的这一特
点，导致并非所有的地方都支持外部 SVG 的引用。为了规避这一问题，也为了让 SVG 文件
的存在更可控（服务器还是有宕机的风险），我们也实现了 LaTeX 公式「本地渲染」的功
能。</p>
<p>我们插件的 <code>local</code> 功能实际上就是借助 MathJax 在本地直接将 LaTeX 公式渲染为本地
SVG 图片。这样，我们就可以将这个保存于本地的 SVG 直接在 Markdown 文件里面引用显
示，同样方便。</p>
<p>继续用上面标准正态分布的公式，我们可以将公式渲染为存储于本地的
SVG：<code>svg/e40qQ5G9jw.svg</code>，并直接保存在 Markdown 文件相邻的一个 <code>svg</code> 文件夹中。
这样，我们就可以继续用 <code>&#x3C;img></code> 标签将这个本地 SVG 插入我们的 Markdown 之中：</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="html"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#ADBAC7">&#x3C;</span><span style="--0:#8DDB8C">div</span><span style="--0:#ADBAC7"> </span><span style="--0:#FF938A;--0fs:italic">align</span><span style="--0:#ADBAC7">=</span><span style="--0:#96D0FF">"center"</span><span style="--0:#ADBAC7">>&#x3C;</span><span style="--0:#8DDB8C">img</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">src</span><span style="--0:#ADBAC7">=</span><span style="--0:#96D0FF">"svg/e40qQ5G9jw.svg"</span><span style="--0:#ADBAC7"> />&#x3C;/</span><span style="--0:#8DDB8C">div</span><span style="--0:#ADBAC7">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<div align=&#x22;center&#x22;><img src=&#x22;svg/e40qQ5G9jw.svg&#x22; /></div>"><div></div></button></div></figure></div>
<figure>
  <img src="https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134658.png" alt="标准正态分布（本地使用 MathJax 渲染得到的 SVG 图片）" width="300px">
  <figcaption>标准正态分布（本地使用 MathJax 渲染得到的 SVG 图片）</figcaption>
</figure>
<h2 id="小结">小结</h2>
<p>以上就是 VS Code Math to Image 这个 VS Code 插件的简单介绍，两种方法（<code>remote</code>
和 <code>local</code>）都可以帮我们渲染出高质量的 SVG 公式图片，这样我们就可以解决 GitHub
等平台不支持数学公式渲染的一大难题啦！如果你觉得我们的插件非常有用，那么
<a href="https://github.com/TeamMeow/vscode-math-to-image">一定要去 GitHub 给我们点上一个 Star</a>，
如果
<a href="https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image&#x26;ssr=false#review-details">能去 VS Marketplace 给我们个五星好评</a>
那就更棒啦。</p>  </div> <div class="post__footer" data-astro-cid-hxbu2e7d> <div class="post-tags post-card__tags" data-astro-cid-hxbu2e7d> <a href="/tags/Automation/" class="post-tags__link"> <span>#</span> Automation </a><a href="/tags/Tech/" class="post-tags__link"> <span>#</span> Tech </a><a href="/tags/VS Code/" class="post-tags__link"> <span>#</span> VS Code </a> </div> <div class="post-tags post-card__tags" data-astro-cid-hxbu2e7d> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="post-tags__link"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:creative-commons">  <symbol id="ai:tabler:creative-commons"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 1 0-18 0"/><path d="M10.5 10.5a2.187 2.187 0 0 0-2.914.116a1.93 1.93 0 0 0 0 2.768a2.19 2.19 0 0 0 2.914.116m6-3a2.187 2.187 0 0 0-2.914.116a1.93 1.93 0 0 0 0 2.768a2.19 2.19 0 0 0 2.914.116"/></g></symbol><use xlink:href="#ai:tabler:creative-commons"></use>  </svg> <span>BY-NC-SA 4.0</span> </a> </div> </div> <div class="post__navigation" data-astro-cid-hxbu2e7d> <a href="/archives/php-random-picture/" class="navlink" style="float: left;" data-astro-cid-hxbu2e7d>
◀ PHP实现随机图片展示 </a><a href="/archives/htmltag/" class="navlink" style="float: right;" data-astro-cid-hxbu2e7d> 盘点不怎么熟悉但十分有趣的html标签 ▶
</a> </div> </div> <div class="toc"> <div class="toc__content"></div> </div>  <div id="back-to-top" data-astro-cid-wlspcwf4> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-wlspcwf4 data-icon="simple-icons:spaceship">  <symbol id="ai:simple-icons:spaceship"><path fill="currentColor" d="M12 1.253c1.044 0 1.956.569 2.44 1.412l4.589 7.932l4.45 7.691c.047.074.21.359.27.494a2.808 2.808 0 0 1-3.406 3.836l-7.901-2.606a1.4 1.4 0 0 0-.442-.07a1.4 1.4 0 0 0-.442.07l-7.9 2.606l-.162.046a2.8 2.8 0 0 1-.684.083a2.81 2.81 0 0 1-2.644-3.763c.03-.091.074-.176.111-.264c.072-.15.161-.288.242-.432l4.449-7.691l4.588-7.932A2.81 2.81 0 0 1 12 1.253"/></symbol><use xlink:href="#ai:simple-icons:spaceship"></use>  </svg> </div>  <div class="donate" data-astro-cid-wzkneuyl> <div class="esa-sponsor" data-astro-cid-wzkneuyl> <div class="tip" data-astro-cid-wzkneuyl> Thanks for the coffee !!!☕ </div> <div class="donate-text" data-astro-cid-wzkneuyl> <div id="alipay" class="alipay" data-astro-cid-wzkneuyl> <a href="#" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/alipay.svg" style="height: 1rem;" alt="alipay" data-astro-cid-wzkneuyl> </a> </div> <div id="wechatpay" class="wechatpay" data-astro-cid-wzkneuyl> <a href="#" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/wechat.svg" style="height: 1rem;" alt="wechat" data-astro-cid-wzkneuyl> </a> </div> <div id="paypal" class="paypal" data-astro-cid-wzkneuyl> <a href="https://paypal.me/xxxxxxxxxx" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/paypal.svg" style="height: 1rem;" alt="paypal" data-astro-cid-wzkneuyl> </a> </div> </div> <div class="qrshow" data-astro-cid-wzkneuyl> <img src="/assets/image/AliPayQR.jpg" alt="alipayQRCode" data-astro-cid-wzkneuyl> </div> <div class="qrshow" data-astro-cid-wzkneuyl> <img src="/assets/image/WeChatQR.jpg" alt="wechatQRCode" data-astro-cid-wzkneuyl> </div> </div> </div>  <div class="author"> <img src="https://marxchou.com/author.jpg" alt="Author" class="author__image" width="180"> <h1 class="author__site-title">Spencer&#39;s Blog</h1> <p class="author__intro">阿巴阿巴 o((&gt;ω&lt; ))o</p> <p class="author__links"> <a href="//mch.icu" title="🚀 Portfolio" rel="noopener" class="has-tooltip active"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:user-filled">  <symbol id="ai:tabler:user-filled"><path fill="currentColor" d="M12 2a5 5 0 1 1-5 5l.005-.217A5 5 0 0 1 12 2m2 12a5 5 0 0 1 5 5v1a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-1a5 5 0 0 1 5-5z"/></symbol><use xlink:href="#ai:tabler:user-filled"></use>  </svg> </a><a href="//memos.marxchou.com" title="🥳 Feed" rel="noopener" class="has-tooltip active" style="color: orange"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:brand-wechat">  <symbol id="ai:tabler:brand-wechat"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16.5 10c3.038 0 5.5 2.015 5.5 4.5c0 1.397-.778 2.645-2 3.47V20l-1.964-1.178A6.7 6.7 0 0 1 16.5 19c-3.038 0-5.5-2.015-5.5-4.5s2.462-4.5 5.5-4.5"/><path d="M11.197 15.698c-.69.196-1.43.302-2.197.302a8 8 0 0 1-2.612-.432L4 17v-2.801C2.763 13.117 2 11.635 2 10c0-3.314 3.134-6 7-6c3.782 0 6.863 2.57 7 5.785v.233M10 8h.01M7 8h.01M15 14h.01M18 14h.01"/></g></symbol><use xlink:href="#ai:tabler:brand-wechat"></use>  </svg> </a><a href="/friends/" title="🧑🏿‍🚒 Friends" rel="noopener" class="has-tooltip active" style="color: #06a878"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:message-chatbot-filled">  <symbol id="ai:tabler:message-chatbot-filled"><path fill="currentColor" d="M18 3a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4h-4.724l-4.762 2.857a1 1 0 0 1-1.508-.743L7 21v-2H6a4 4 0 0 1-3.995-3.8L2 15V7a4 4 0 0 1 4-4zm-2.8 9.286a1 1 0 0 0-1.414.014a2.5 2.5 0 0 1-3.572 0a1 1 0 0 0-1.428 1.4a4.5 4.5 0 0 0 6.428 0a1 1 0 0 0-.014-1.414M9.51 8H9.5a1 1 0 1 0 0 2h.01a1 1 0 0 0 0-2m5 0h-.01a1 1 0 0 0 0 2h.01a1 1 0 0 0 0-2"/></symbol><use xlink:href="#ai:tabler:message-chatbot-filled"></use>  </svg> </a><a href="/archives/" title="📂 Archives" rel="noopener" class="has-tooltip active" style="color: var(--title-color)"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:archive-filled">  <symbol id="ai:tabler:archive-filled"><path fill="currentColor" d="M2 5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2m17 4c.513 0 .936.463.993 1.06l.007.14v7.2c0 1.917-1.249 3.484-2.824 3.594L17 21H7c-1.598 0-2.904-1.499-2.995-3.388L4 17.4v-7.2C4 9.537 4.448 9 5 9zm-5 2h-4l-.117.007a1 1 0 0 0 0 1.986L10 13h4l.117-.007a1 1 0 0 0 0-1.986z"/></symbol><use xlink:href="#ai:tabler:archive-filled"></use>  </svg> </a><a href="/tags/" title="🏷️ tags" rel="noopener" class="has-tooltip active"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:tags">  <symbol id="ai:tabler:tags"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592-3.592a2.41 2.41 0 0 0 0-3.408l-5.71-5.71A2 2 0 0 0 9.172 6H5a2 2 0 0 0-2 2"/><path d="m18 19l1.592-1.592a4.82 4.82 0 0 0 0-6.816L15 6m-8 4h-.01"/></g></symbol><use xlink:href="#ai:tabler:tags"></use>  </svg> </a> <span>/</span> <a href="//qq.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #12b7f5"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="simple-icons:tencentqq">  <symbol id="ai:simple-icons:tencentqq"><path fill="currentColor" d="M21.395 15.035a40 40 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a39 39 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673c.54.065 2.103-2.472 2.103-2.472c0 1.469.756 3.387 2.394 4.771c-.612.188-1.363.479-1.845.835c-.434.32-.379.646-.301.778c.343.578 5.883.369 7.482.189c1.6.18 7.14.389 7.483-.189c.078-.132.132-.458-.301-.778c-.483-.356-1.233-.646-1.846-.836c1.637-1.384 2.393-3.302 2.393-4.771c0 0 1.563 2.537 2.103 2.472c.251-.03.581-1.39-.438-4.673"/></symbol><use xlink:href="#ai:simple-icons:tencentqq"></use>  </svg> </a><a href="//twitter.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #1da1f2"> <svg width="1.23em" height="1em" viewBox="0 0 256 209" data-icon="logos:twitter">  <symbol id="ai:logos:twitter"><path fill="#55acee" d="M256 25.45a105 105 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.2 105.2 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.3 52.3 0 0 1-23.79-6.57q-.004.33-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.6 52.6 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435q0-3.417-.152-6.795A106.8 106.8 0 0 0 256 25.45"/></symbol><use xlink:href="#ai:logos:twitter"></use>  </svg> </a><a href="//t.me/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #179cde"> <svg width="1em" height="1em" viewBox="0 0 256 256" data-icon="logos:telegram">  <symbol id="ai:logos:telegram"><defs><linearGradient id="logosTelegram0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#2AABEE"/><stop offset="100%" stop-color="#229ED9"/></linearGradient></defs><path fill="url(#logosTelegram0)" d="M128 0C94.06 0 61.48 13.494 37.5 37.49A128.04 128.04 0 0 0 0 128c0 33.934 13.5 66.514 37.5 90.51C61.48 242.506 94.06 256 128 256s66.52-13.494 90.5-37.49c24-23.996 37.5-56.576 37.5-90.51s-13.5-66.514-37.5-90.51C194.52 13.494 161.94 0 128 0"/><path fill="#FFF" d="M57.94 126.648q55.98-24.384 74.64-32.152c35.56-14.786 42.94-17.354 47.76-17.441c1.06-.017 3.42.245 4.96 1.49c1.28 1.05 1.64 2.47 1.82 3.467c.16.996.38 3.266.2 5.038c-1.92 20.24-10.26 69.356-14.5 92.026c-1.78 9.592-5.32 12.808-8.74 13.122c-7.44.684-13.08-4.912-20.28-9.63c-11.26-7.386-17.62-11.982-28.56-19.188c-12.64-8.328-4.44-12.906 2.76-20.386c1.88-1.958 34.64-31.748 35.26-34.45c.08-.338.16-1.598-.6-2.262c-.74-.666-1.84-.438-2.64-.258c-1.14.256-19.12 12.152-54 35.686c-5.1 3.508-9.72 5.218-13.88 5.128c-4.56-.098-13.36-2.584-19.9-4.708c-8-2.606-14.38-3.984-13.82-8.41c.28-2.304 3.46-4.662 9.52-7.072"/></symbol><use xlink:href="#ai:logos:telegram"></use>  </svg> </a><a href="//github.com/spencerwooo" target="_blank" title="🔗 @spencerwooo" rel="noopener" class="has-tooltip active" style="color: var(--title-color)"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="simple-icons:github">  <symbol id="ai:simple-icons:github"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></symbol><use xlink:href="#ai:simple-icons:github"></use>  </svg> </a><a href="//youtube.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #ff0000"> <svg width="1.43em" height="1em" viewBox="0 0 256 180" data-icon="logos:youtube-icon">  <symbol id="ai:logos:youtube-icon"><path fill="red" d="M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134"/><path fill="#FFF" d="m102.421 128.06l66.328-38.418l-66.328-38.418z"/></symbol><use xlink:href="#ai:logos:youtube-icon"></use>  </svg> </a> </p> </div><div id="waline" data-astro-cid-6z674vj5></div>   </main> <footer class="footer" data-astro-cid-sz7xmlte> <div class="footer__copyright" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>© 2017 - 2024.&nbsp;All rights reserved</span></div> <div class="footer__links" data-astro-cid-sz7xmlte><a href="https://beian.miit.gov.cn" target="_blank" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>豫ICP备20006179号</span></a></div> <div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Analytics by</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:umami">  <symbol id="ai:simple-icons:umami"><path fill="currentColor" d="M2.203 8.611H.857a.845.845 0 0 0-.841.841v.858a13 13 0 0 0-.016.6c0 6.627 5.373 12 12 12c6.527 0 11.837-5.212 11.996-11.701c0-.025.004-.05.004-.075V9.452a.845.845 0 0 0-.841-.841h-1.346c-1.159-4.329-5.112-7.521-9.805-7.521S3.363 4.282 2.203 8.611m18.444 0H3.37c1.127-3.702 4.57-6.399 8.638-6.399c4.069 0 7.512 2.697 8.639 6.399"/></symbol><use xlink:href="#ai:simple-icons:umami"></use>  </svg> <a href="//umami.is" data-astro-cid-sz7xmlte>Umami</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Runs on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:astro">  <symbol id="ai:simple-icons:astro"><path fill="currentColor" d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.16 3.16 0 0 1-1.407-1.188a3.3 3.3 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614s.57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727z"/></symbol><use xlink:href="#ai:simple-icons:astro"></use>  </svg> <a href="//astro.build" data-astro-cid-sz7xmlte>Astro</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Deployed on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:vercel">  <symbol id="ai:simple-icons:vercel"><path fill="currentColor" d="M24 22.525H0l12-21.05z"/></symbol><use xlink:href="#ai:simple-icons:vercel"></use>  </svg> <a href="//vercel.com" data-astro-cid-sz7xmlte>Vercel</a> </div> <div id="rss-stats" data-astro-cid-sz7xmlte>
&nbsp;&nbsp;
<a href="/rss.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>RSS</span></a> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="tabler:point-filled">  <symbol id="ai:tabler:point-filled"><path fill="currentColor" d="M12 7a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7"/></symbol><use xlink:href="#ai:tabler:point-filled"></use>  </svg> <a href="/sitemap-index.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>Sitemap</span></a> </div> </footer>  </div> <script>
            document.addEventListener('astro:page-load', () => {
                try {
                    // 是否启用
                    const enable = true; // 设为true以启用跳转功能
                    if (!enable) return;
                    // 中转页地址
                    const redirectPage = "/redirect/?url=";
                    // 包含的 className
                    const includeClass = ['post__content']; // 添加需要包含的类名
                    // 判断元素或其父元素是否包含指定类名
                    const hasIncludeClass = (element) => {
                        while (element) {
                            if (includeClass.some(className => element.classList.contains(className))) {
                                return true;
                            }
                            element = element.parentElement;
                        }
                        return false;
                    };
                    // 所有链接
                    const allLinks = [...document.getElementsByTagName("a")];
                    if (allLinks.length === 0) return;
                    allLinks.forEach((link) => {
                        // 检查链接是否包含 target="_blank" 属性或指定的类名
                        if (link.getAttribute("target") === "_blank" || hasIncludeClass(link)) {
                            const linkHref = link.getAttribute("href");
                            // 存在链接且非中转页
                            if (linkHref && !linkHref.includes(redirectPage)) {
                                // Base64 编码 href
                                const encodedHref = btoa(linkHref);
                                const redirectLink = `${redirectPage}${encodedHref}`;
                                // 保存原始链接
                                link.setAttribute("original-href", linkHref);
                                // 覆盖 href
                                link.setAttribute("href", redirectLink);
                                // 增加 target="_blank" 属性
                                link.setAttribute("target", "_blank");
                            }
                        }
                    });
                } catch (error) {
                    console.error("处理链接时出错：", error);
                }
            });
        </script> </body> </html>  