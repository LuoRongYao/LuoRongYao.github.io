<!DOCTYPE html><html lang="zh-CN"> <head><!-- Global Meta --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>meilisearch - Spencer&#39;s Blog</title><meta name="description" content="meilisearch - meilisearch"><meta name="keywords" content="Astro, Theme, Yi"><meta name="author" content="Spencer Woo"><meta name="generator" content="Astro v4.10.2"><!-- Open Graph --><meta property="og:title" content="meilisearch - Spencer's Blog"><meta property="og:description" content="meilisearch - meilisearch"><meta property="og:image" content="https://marxchou.com/assets/postImage/wait-this-is-not-my-commit.png"><meta property="og:image:alt" content="wait-this-is-not-my-commit"><meta property="og:url" content="https://marxchou.com/archives/meilisearch/"><meta property="og:type" content="website"><meta property="og:site_name" content="Spencer Woo"><meta property="og:locale" content="zh-CN"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="meilisearch - Spencer's Blog"><meta name="twitter:description" content="meilisearch - meilisearch"><meta name="twitter:image" content="https://marxchou.com/assets/postImage/wait-this-is-not-my-commit.png"><meta name="twitter:image:alt" content="wait-this-is-not-my-commit"><meta name="twitter:url" content="https://marxchou.com/archives/meilisearch/"><meta name="twitter:creator" content="@Spencer Woo"><meta name="twitter:site" content="Spencer's Blog"><!-- 浏览器和搜索引擎相关 --><meta name="robots" content="index, follow"><meta http-equiv="Content-Language" content="zh-CN"><meta name="theme-color" content="#8D46E7"><meta name="x-astro-vitals-route" content="/"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS"><link rel="canonical" href="https://marxchou.com/archives/meilisearch/"><!-- Favicon --><link rel="shortcut icon" type="image/svg+xml" href="https://marxchou.com/favicon.svg"><!-- Analytics --><script type="text/partytown" src="https://umami.marxchou.com/script.js" defer data-website-id="73b29141-fccf-4d54-9c2f-f7d0d146f86b"></script><!-- Style / Scripts --><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/hoisted.iYpLhLcB.css">
<link rel="stylesheet" href="/_astro/hoisted.CMKAAEoH.css">
<link rel="stylesheet" href="/_astro/_slug_.CCFqlUjP.css">
<style>:root{--B0: #fff;--B10: #f8f8f9;--B20: #f7f7f8;--B30: #efefef;--B40: #e5e5e5;--B60: #8e8787;--B80: #655e5e;--B100: #292525;--green: #3fd67e;--red: #fd281a;--sspai-red: #d71a1b;--blue: #44b9fb;--pink: #ff2c78;--white: #f4f4f4;--orange: #fc7310;--prime-blue: #0355e3;--B80-t: #8e8787;--B60-t: #655e5e}html[data-theme=dark]:root{color-scheme:dark;--B0: #232222;--B10: #272626;--B20: #171514;--B30: #2b2929;--B40: #373737;--B60: #7f7f7f;--B80: #cac3c3;--B100: #fff;--green: #57ef96;--red: #f94135;--sspai-red: #d71a1b;--blue: #44b9fb;--pink: #ed638c;--white: #171514;--orange: #ee6c35;--prime-blue: #3577e8;--B60-t: #fafafa;--B80-t: #7f7f7f}:root{--a-dur-default: .36s;--a-func-default: cubic-bezier(.5, 0, 0, 1);--a-dur-short: .15s;--a-func-short: cubic-bezier(0, 0, 0, 1)}.toc__content{position:fixed;left:calc((100vw - min(100vw,664px))/2 + min(100vw,664px) + 178px);top:500px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:90;padding:10px 0;width:auto;max-height:600px;overflow:hidden}@media screen and (max-width: 1440px){.toc__content{left:calc(100vw - 200px)}}@media screen and (max-width: 1280px){.toc__content{display:none}}.toc__content:hover{overflow:auto}.toc__content:hover .toc-list-item .toc-link{display:inline-block;opacity:1;cursor:pointer}.toc__content .toc-list-item{text-align:left;margin-bottom:0}.toc__content .toc-list-item .toc-link{font-size:12px;line-height:17px;color:var(--B80-t);display:inline-block;opacity:0;width:auto;vertical-align:middle;text-align:left;-webkit-transition:opacity .5s;transition:opacity .5s;margin-top:-2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px}.toc__content .toc-list-item .toc-link:hover{color:var(--B60-t);display:inline-block;opacity:1;cursor:pointer}.toc__content .toc-list-item .toc-link{margin-left:8px}html[data-theme=dark] .toc__content .toc-list-item .toc-link{color:var(--B80-t)}html[data-theme=dark] .toc__content .toc-list-item .toc-link:hover{color:var(--B60-t)}ol{list-style-type:none}.toc__content{overflow-y:auto}.toc__content>.toc-list{overflow:hidden;position:relative}.toc__content>.toc-list li{list-style:none}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all .3s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed!important;top:0}.is-active-link{font-weight:800}.donate[data-astro-cid-wzkneuyl]{margin-top:1rem}.esa-sponsor[data-astro-cid-wzkneuyl]{position:relative;width:100%;margin:40px 0}.esa-sponsor[data-astro-cid-wzkneuyl] .qrshow[data-astro-cid-wzkneuyl]{position:absolute;width:200px;height:200px;cursor:pointer;left:calc(50% - 100px);top:-170px;z-index:999;display:none;box-shadow:0 1px 15px #1b1f2326,0 0 1px #6a737d59}.tip[data-astro-cid-wzkneuyl]{display:flex;align-items:center;justify-content:center;margin-top:1rem;margin-bottom:1rem}.donate-text[data-astro-cid-wzkneuyl]{display:flex;align-items:center;justify-content:center}.alipay[data-astro-cid-wzkneuyl]{padding:.5rem;border-width:1px;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}.wechatpay[data-astro-cid-wzkneuyl]{padding:.5rem;border-top-width:.5rem;border-bottom-width:1px}.paypal[data-astro-cid-wzkneuyl]{padding:.5rem;border-width:1px;border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}@media screen and (max-width: 650px){.donate[data-astro-cid-wzkneuyl]{display:none}}#content_progress[data-astro-cid-hxbu2e7d]{position:fixed;left:0;top:0;z-index:1000;width:100%;height:2px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:transparent;color:#2ea997}#content_progress[data-astro-cid-hxbu2e7d]::-webkit-progress-bar{background-color:transparent}#content_progress[data-astro-cid-hxbu2e7d]::-webkit-progress-value{background-color:var(--progress-color, #2ea997)}#content_progress[data-astro-cid-hxbu2e7d]::-moz-progress-bar{background-color:var(--progress-color, #2ea997)}
#back-to-top[data-astro-cid-wlspcwf4]{display:none}#back-to-top[data-astro-cid-wlspcwf4].active{display:block}
#waline[data-astro-cid-6z674vj5]{min-height:38rem;max-width:var(--content-width);position:relative;overflow:hidden;margin:0 auto;padding:0 var(--space)}@media screen and (max-width: 650px){#waline[data-astro-cid-6z674vj5]{padding:unset}}html[data-theme=dark]{--waline-color: #ced8de !important}
</style><script type="module" src="/_astro/hoisted.9XIBcYVo.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");e.newDocument.body.append(r)})})(document);</script></head><body> <div id="app"> <header id="nprogress-container" class="header" data-astro-cid-3ef6ksr2> <div class="fullwidth" data-astro-cid-3ef6ksr2> <div class="header__left" data-astro-cid-3ef6ksr2> <span id="sitename" data-astro-cid-tvrurpns></span> <a class="logo" href="/" data-astro-cid-tvrurpns> <span class="logo__text" data-astro-cid-tvrurpns><img src="https://marxchou.com/logo.svg" alt="Blog Logo" width="24" data-astro-cid-tvrurpns>Spencer&#39;s Blog</span> </a>  </div> <div class="header__right" data-astro-cid-3ef6ksr2> <div id="docsearch"></div>  <button id="theme-btn" role="button" aria-label="Toggle dark/light" class="toggle-theme" data-astro-cid-cp4oi4cm> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-sun" data-astro-cid-cp4oi4cm data-icon="tabler:sun">  <symbol id="ai:tabler:sun"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"/></symbol><use xlink:href="#ai:tabler:sun"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="feather feather-moon" data-astro-cid-cp4oi4cm data-icon="tabler:moon-stars">  <symbol id="ai:tabler:moon-stars"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992zm5 1a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2m2 7h2m-1-1v2"/></symbol><use xlink:href="#ai:tabler:moon-stars"></use>  </svg> </button>    </div> </div> </header>  <main class="main">  <progress id="content_progress" value="0" data-astro-cid-hxbu2e7d></progress> <div class="post-title" data-astro-cid-hxbu2e7d> <h1 class="post-title__text" data-astro-cid-hxbu2e7d> meilisearch </h1> <div class="post-meta post-card__meta">
Posted 2021-12-30.&nbsp;
    Updated 2024-06-21.&nbsp;
<span id="word-count">745 words.</span>&nbsp;
<span id="read-time">4 min read.</span>&nbsp;
<span class="waline-pageview-count" data-path="/archives/meilisearch/">0</span><span> views.&nbsp;</span> <span class="waline-comment-count" data-path="/archives/meilisearch/">0</span><span> messages.</span> </div> </div> <div class="post content-box" data-astro-cid-hxbu2e7d> <div class="post-card__header" data-astro-cid-hxbu2e7d> <picture> <source srcset="/_astro/wait-this-is-not-my-commit.rTkJoa1f_1LAnY1.avif" type="image/avif"><source srcset="/_astro/wait-this-is-not-my-commit.rTkJoa1f_Zqx9GE.webp" type="image/webp"> <img src="/_astro/wait-this-is-not-my-commit.rTkJoa1f_Y1TRw.png" alt="wait-this-is-not-my-commit" class="post-card__image" loading="eager" width="1920" height="600" decoding="async"> </picture> </div> <div class="remark-aside remark-aside--danger" data-astro-cid-hxbu2e7d> <p style="margin-bottom: 1rem;" data-astro-cid-hxbu2e7d>
🌶 <strong data-astro-cid-hxbu2e7d>过期警告：</strong> 本页面距今已有
904
天未更新，年久失修，内容可能有所偏颇，还请仔细甄别！
</p> </div> <div class="post__content" data-astro-cid-hxbu2e7d>  <p>该插件用于让 Vuepress 的搜索栏支持全文搜索。</p>
<ul>
<li>当用户在搜索栏中输入字符串时，该插件会实时地向 meilisearch 服务器发出 AJAX 形
式的查询请求，然后将查询结果显示在搜索栏下方。</li>
</ul>
<p>meilisearch 是一个开源的搜索引擎，采用 Rust 语言开发，借鉴了 Algolia 引擎，适合
用于实现个人网站的搜索栏。</p>
<ul>
<li><a href="https://docs.meilisearch.com/">官网(opens new window)</a></li>
<li>使用 meilisearch 的主要流程如下：
<ol>
<li>运行 meilisearch 服务器。</li>
<li>执行 meilisearch 的 scrape 工具，抓取目标网站的内容信息，并送到 meilisearch
服务器中存储。 每当目标网站的内容更新时，就应该抓取一次。</li>
<li>向 meilisearch 服务器发出 HTTP 查询请求，搜索某一字符串在目标网站上的位置。</li>
</ol>
</li>
</ul>
<aside aria-label="danger" class="remark-aside remark-aside--danger"><h4 class="remark-aside__title" aria-hidden="true" id="危险"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="remark-aside__icon"><path d="M12 2c5.523 0 10 4.477 10 10v3.764a2 2 0 0 1-1.106 1.789L18 19v1a3 3 0 0 1-2.824 2.995L14.95 23a2.5 2.5 0 0 0 .044-.33L15 22.5V22a2 2 0 0 0-1.85-1.995L13 20h-2a2 2 0 0 0-1.995 1.85L9 22v.5c0 .171.017.339.05.5H9a3 3 0 0 1-3-3v-1l-2.894-1.447A2 2 0 0 1 2 15.763V12C2 6.477 6.477 2 12 2zm-4 9a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"></path></svg>危险</h4><div class="remark-aside__content"><p>着重提示插件、服务器、抓取程序，三者的适配（版本）要一致，不然会报
错，无数据。可以在<a href="https://github.com/meilisearch">GIthub</a>查看三者版本</p></div></aside>
<aside aria-label="note" class="remark-aside remark-aside--note"><h4 class="remark-aside__title" aria-hidden="true" id="注意"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="remark-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>注意</h4><div class="remark-aside__content"><p>此时文档所使用的版本：meilisearch: v0.26.1 docs-scraper: v0.12.1
vuepress-plugin-meilisearch: v0.12.1</p></div></aside>
<h2 id="使用步骤">使用步骤</h2>
<ol>
<li>
<p>启动 meilisearch 服务器：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.5izl9.css"><script type="module" src="/_astro/ec.3zb7u.js"></script><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#F69D50">docker</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">run</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">-d</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">--name</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">meilisearch</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">--restart=always</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-p</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">7700:7700</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-e</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">MEILI_HTTP_ADDR=0.0.0.0:7700</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-v</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">/path/to/data.ms:/data.ms</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#96D0FF">getmeili/meilisearch:v0.26.1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="docker run -d --name meilisearch --restart=always \    -p 7700:7700 \    -e MEILI_HTTP_ADDR=0.0.0.0:7700 \    -v /path/to/data.ms:/data.ms \    getmeili/meilisearch:v0.26.1"><div></div></button></div></figure></div>
<ul>
<li>
<p>启动 meilisearch 服务器时，默认没有设置密钥，允许用户访问任意 URL 。设置密
钥就可以拒绝非法用户的访问。密钥尽量长一些。</p>
</li>
<li>
<p>可以设置环境变量</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#adbac7">MEILI_MASTER_KEY=******</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="MEILI_MASTER_KEY=******"><div></div></button></div></figure></div>
<p>即；</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#F69D50">docker</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">run</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">-d</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">--name</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">meilisearch</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">--restart=always</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span style="--0:#ADBAC7">-p </span><span style="--0:#96D0FF">7700:7700</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span style="--0:#ADBAC7">-e </span><span style="--0:#96D0FF">MEILI_MASTER_KEY=myMasterKey</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span style="--0:#ADBAC7">-e </span><span style="--0:#96D0FF">MEILI_HTTP_ADDR=0.0.0.0:7700</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span style="--0:#ADBAC7">-v </span><span style="--0:#96D0FF">/path/to/data.ms:/data.ms</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">6</div></div><div class="code"><span style="--0:#ADBAC7">getmeili/meilisearch:v0.26.1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="docker run -d --name meilisearch --restart=always \-p 7700:7700 \-e MEILI_MASTER_KEY=myMasterKey \-e MEILI_HTTP_ADDR=0.0.0.0:7700 \-v /path/to/data.ms:/data.ms \getmeili/meilisearch:v0.26.1"><div></div></button></div></figure></div>
<p>作为主密钥，此时会自动生成私钥和公钥，发送以下 HTTP 请求即可查询到：</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#ADBAC7">[root@CentOS </span><span style="--0:#F5776E">~</span><span style="--0:#ADBAC7">]# curl </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span style="--0:#F5776E">></span><span style="--0:#ADBAC7"> -X GET </span><span style="--0:#96D0FF">'http://ip:7700/keys'</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span style="--0:#F5776E">></span><span style="--0:#ADBAC7"> -H </span><span style="--0:#96D0FF">'Authorization: Bearer myMasterKey'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[root@CentOS ~]# curl \> -X GET &#x27;http://ip:7700/keys&#x27; \> -H &#x27;Authorization: Bearer myMasterKey&#x27;"><div></div></button></div></figure></div>
<p>会返回俩个密钥：<code>Default Search API Key</code> 和 <code>Default Admin API Key</code></p>
</li>
<li>
<p>如果用户在发出的 HTTP 查询请求的 headers 中加上 <code>Default Admin API Key</code>（主
密钥一般不用于查询），才有权访问除了 <code>/keys</code> 以外的 URL 。如果使用 Default
Search API Key，则只有权查询 <code>/indexes</code> 下的部分内容。</p>
</li>
<li>
<p>部署新的 meilisearch 时，索引不能向上兼容，需要清空 <code>/data.ms</code> 目录，重新生
成索引。</p>
</li>
</ul>
</li>
<li>
<p>执行 meilisearch 的 scrape 工具：</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#F69D50">docker</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">run</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">-t</span><span style="--0:#ADBAC7"> </span><span style="--0:#6CB6FF">--rm</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">--network=host</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-e</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">MEILISEARCH_HOST_URL='http://ip:7700'</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-e</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">MEILISEARCH_API_KEY='myMasterKey'</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#6CB6FF">-v</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">/path/to/docs-scraper.json:/docs-scraper/config.json</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">\</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">6</div></div><div class="code"><span style="--0:#ADBAC7">getmeili/docs-scraper:v0.12.1 </span><span style="--0:#96D0FF">pipenv</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">run</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">./docs_scraper</span><span style="--0:#ADBAC7"> </span><span style="--0:#96D0FF">config.json</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="docker run -t --rm \    --network=host \    -e MEILISEARCH_HOST_URL=&#x27;http://ip:7700&#x27; \    -e MEILISEARCH_API_KEY=&#x27;myMasterKey&#x27; \    -v /path/to/docs-scraper.json:/docs-scraper/config.json \getmeili/docs-scraper:v0.12.1 pipenv run ./docs_scraper config.json"><div></div></button></div></figure></div>
<p>这里需要创建 scrape 的配置文件 docs-scraper.json ，如下：</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#ADBAC7">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"index_uid"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">"docs"</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 索引 ID ，用于区分不同的抓取结果</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"sitemap_urls"</span><span style="--0:#ADBAC7">: [</span><span style="--0:#96D0FF">"http://test.com/sitemap.xml"</span><span style="--0:#ADBAC7">],</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"start_urls"</span><span style="--0:#ADBAC7">: [</span><span style="--0:#96D0FF">"http://test.com"</span><span style="--0:#ADBAC7">], </span><span style="--0:#949EA8">// 待抓取的目标网站</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"selectors"</span><span style="--0:#ADBAC7">: {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl0"</span><span style="--0:#ADBAC7">: {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">7</div></div><div class="code"><span class="indent">      </span><span style="--0:#8DDB8C">"selector"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".sidebar-heading.open"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">8</div></div><div class="code"><span class="indent">      </span><span style="--0:#8DDB8C">"global"</span><span style="--0:#ADBAC7">: </span><span style="--0:#6CB6FF">true</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">9</div></div><div class="code"><span class="indent">      </span><span style="--0:#8DDB8C">"default_value"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">"Documentation"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">10</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">    </span></span><span style="--0:#ADBAC7">},</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">11</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl1"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content h1"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">12</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl2"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content h2"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">13</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl3"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content h3"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">14</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl4"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content h4"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">15</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"lvl5"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content h5"</span><span style="--0:#ADBAC7">,</span></div></div><details class="ec-section"><summary><div class="ec-line"><div class="gutter"><div class="ln"></div></div><div class="code"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16" width="16" height="16"><path d="m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z"></path></svg>5 collapsed lines</div></div></summary><div class="ec-line"><div class="gutter"><div class="ln">16</div></div><div class="code"><span class="indent">    </span><span style="--0:#8DDB8C">"text"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">".theme-default-content p, .theme-default-content li"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">17</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">  </span></span><span style="--0:#ADBAC7">},</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">18</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"strip_chars"</span><span style="--0:#ADBAC7">: </span><span style="--0:#96D0FF">" .,;:#"</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">19</div></div><div class="code"><span class="indent">  </span><span style="--0:#8DDB8C">"scrap_start_urls"</span><span style="--0:#ADBAC7">: </span><span style="--0:#6CB6FF">true</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">20</div></div><div class="code"><span style="--0:#ADBAC7">}</span></div></div></details></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;index_uid&#x22;: &#x22;docs&#x22;, // 索引 ID ，用于区分不同的抓取结果  &#x22;sitemap_urls&#x22;: [&#x22;http://test.com/sitemap.xml&#x22;],  &#x22;start_urls&#x22;: [&#x22;http://test.com&#x22;], // 待抓取的目标网站  &#x22;selectors&#x22;: {    &#x22;lvl0&#x22;: {      &#x22;selector&#x22;: &#x22;.sidebar-heading.open&#x22;,      &#x22;global&#x22;: true,      &#x22;default_value&#x22;: &#x22;Documentation&#x22;    },    &#x22;lvl1&#x22;: &#x22;.theme-default-content h1&#x22;,    &#x22;lvl2&#x22;: &#x22;.theme-default-content h2&#x22;,    &#x22;lvl3&#x22;: &#x22;.theme-default-content h3&#x22;,    &#x22;lvl4&#x22;: &#x22;.theme-default-content h4&#x22;,    &#x22;lvl5&#x22;: &#x22;.theme-default-content h5&#x22;,    &#x22;text&#x22;: &#x22;.theme-default-content p, .theme-default-content li&#x22;  },  &#x22;strip_chars&#x22;: &#x22; .,;:#&#x22;,  &#x22;scrap_start_urls&#x22;: true}"><div></div></button></div></figure></div>
</li>
<li>
<p>安装：<code>yarn add vuepress-plugin-meilisearch</code></p>
</li>
<li>
<p>在 config.js 中添加如下配置：</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="gutter"><div class="ln">1</div></div><div class="code"><span style="--0:#6CB6FF">module</span><span style="--0:#ADBAC7">.</span><span style="--0:#6CB6FF">exports</span><span style="--0:#ADBAC7"> </span><span style="--0:#F5776E">=</span><span style="--0:#ADBAC7"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">2</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">  </span></span><span style="--0:#ADBAC7">plugins: [</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">3</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">    </span></span><span style="--0:#ADBAC7">[</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">4</div></div><div class="code"><span class="indent">      </span><span style="--0:#96D0FF">'vuepress-plugin-meilisearch'</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">5</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">      </span></span><span style="--0:#ADBAC7">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">6</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">hostUrl: </span><span style="--0:#96D0FF">'http://ip:7700'</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 该 URL 应该能在用户的浏览器上被访问，不能为 localhost</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">7</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">apiKey: </span><span style="--0:#96D0FF">'Default Search API Key'</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 这里应该使用 Search key</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">8</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">indexUid: </span><span style="--0:#96D0FF">'docs'</span><span style="--0:#ADBAC7">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">9</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">placeholder: </span><span style="--0:#96D0FF">'Search as you type...'</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 在搜索栏中显示的占位符</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">10</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">maxSuggestions: </span><span style="--0:#6CB6FF">5</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 最多显示几个搜索结果</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">11</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">        </span></span><span style="--0:#ADBAC7">cropLength: </span><span style="--0:#6CB6FF">30</span><span style="--0:#ADBAC7">, </span><span style="--0:#949EA8">// 每个搜索结果最多显示多少个字符</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">12</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">      </span></span><span style="--0:#ADBAC7">},</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">13</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">    </span></span><span style="--0:#ADBAC7">],</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">14</div></div><div class="code"><span class="indent"><span style="--0:#ADBAC7">  </span></span><span style="--0:#ADBAC7">],</span></div></div><div class="ec-line"><div class="gutter"><div class="ln">15</div></div><div class="code"><span style="--0:#ADBAC7">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="module.exports = {  plugins: [    [      &#x27;vuepress-plugin-meilisearch&#x27;,      {        hostUrl: &#x27;http://ip:7700&#x27;, // 该 URL 应该能在用户的浏览器上被访问，不能为 localhost        apiKey: &#x27;Default Search API Key&#x27;, // 这里应该使用 Search key        indexUid: &#x27;docs&#x27;,        placeholder: &#x27;Search as you type...&#x27;, // 在搜索栏中显示的占位符        maxSuggestions: 5, // 最多显示几个搜索结果        cropLength: 30, // 每个搜索结果最多显示多少个字符      },    ],  ],}"><div></div></button></div></figure></div>
</li>
<li>
<p>重新编译 Vuepress 网站。</p>
</li>
</ol>  </div> <div class="post__footer" data-astro-cid-hxbu2e7d> <div class="post-tags post-card__tags" data-astro-cid-hxbu2e7d> <a href="/tags/meilisearch/" class="post-tags__link"> <span>#</span> meilisearch </a> </div> <div class="post-tags post-card__tags" data-astro-cid-hxbu2e7d> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="post-tags__link"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:creative-commons">  <symbol id="ai:tabler:creative-commons"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 1 0-18 0"/><path d="M10.5 10.5a2.187 2.187 0 0 0-2.914.116a1.93 1.93 0 0 0 0 2.768a2.19 2.19 0 0 0 2.914.116m6-3a2.187 2.187 0 0 0-2.914.116a1.93 1.93 0 0 0 0 2.768a2.19 2.19 0 0 0 2.914.116"/></g></symbol><use xlink:href="#ai:tabler:creative-commons"></use>  </svg> <span>BY-NC-SA 4.0</span> </a> </div> </div> <div class="post__navigation" data-astro-cid-hxbu2e7d> <a href="/archives/wechat-record-export/" class="navlink" style="float: left;" data-astro-cid-hxbu2e7d>
◀ 你想要的微信聊天记录导出，这个免费软件做到了 </a><a href="/archives/initialize-cloud-disk/" class="navlink" style="float: right;" data-astro-cid-hxbu2e7d> 初始化云硬盘 ▶
</a> </div> </div> <div class="toc"> <div class="toc__content"></div> </div>  <div id="back-to-top" data-astro-cid-wlspcwf4> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-wlspcwf4 data-icon="simple-icons:spaceship">  <symbol id="ai:simple-icons:spaceship"><path fill="currentColor" d="M12 1.253c1.044 0 1.956.569 2.44 1.412l4.589 7.932l4.45 7.691c.047.074.21.359.27.494a2.808 2.808 0 0 1-3.406 3.836l-7.901-2.606a1.4 1.4 0 0 0-.442-.07a1.4 1.4 0 0 0-.442.07l-7.9 2.606l-.162.046a2.8 2.8 0 0 1-.684.083a2.81 2.81 0 0 1-2.644-3.763c.03-.091.074-.176.111-.264c.072-.15.161-.288.242-.432l4.449-7.691l4.588-7.932A2.81 2.81 0 0 1 12 1.253"/></symbol><use xlink:href="#ai:simple-icons:spaceship"></use>  </svg> </div>  <div class="donate" data-astro-cid-wzkneuyl> <div class="esa-sponsor" data-astro-cid-wzkneuyl> <div class="tip" data-astro-cid-wzkneuyl> Thanks for the coffee !!!☕ </div> <div class="donate-text" data-astro-cid-wzkneuyl> <div id="alipay" class="alipay" data-astro-cid-wzkneuyl> <a href="#" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/alipay.svg" style="height: 1rem;" alt="alipay" data-astro-cid-wzkneuyl> </a> </div> <div id="wechatpay" class="wechatpay" data-astro-cid-wzkneuyl> <a href="#" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/wechat.svg" style="height: 1rem;" alt="wechat" data-astro-cid-wzkneuyl> </a> </div> <div id="paypal" class="paypal" data-astro-cid-wzkneuyl> <a href="https://paypal.me/xxxxxxxxxx" target="_blank" data-astro-cid-wzkneuyl> <img src="/assets/image/paypal.svg" style="height: 1rem;" alt="paypal" data-astro-cid-wzkneuyl> </a> </div> </div> <div class="qrshow" data-astro-cid-wzkneuyl> <img src="/assets/image/AliPayQR.jpg" alt="alipayQRCode" data-astro-cid-wzkneuyl> </div> <div class="qrshow" data-astro-cid-wzkneuyl> <img src="/assets/image/WeChatQR.jpg" alt="wechatQRCode" data-astro-cid-wzkneuyl> </div> </div> </div>  <div class="author"> <img src="https://marxchou.com/author.jpg" alt="Author" class="author__image" width="180"> <h1 class="author__site-title">Spencer&#39;s Blog</h1> <p class="author__intro">阿巴阿巴 o((&gt;ω&lt; ))o</p> <p class="author__links"> <a href="//mch.icu" title="🚀 Portfolio" rel="noopener" class="has-tooltip active"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:user-filled">  <symbol id="ai:tabler:user-filled"><path fill="currentColor" d="M12 2a5 5 0 1 1-5 5l.005-.217A5 5 0 0 1 12 2m2 12a5 5 0 0 1 5 5v1a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-1a5 5 0 0 1 5-5z"/></symbol><use xlink:href="#ai:tabler:user-filled"></use>  </svg> </a><a href="//memos.marxchou.com" title="🥳 Feed" rel="noopener" class="has-tooltip active" style="color: orange"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:brand-wechat">  <symbol id="ai:tabler:brand-wechat"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16.5 10c3.038 0 5.5 2.015 5.5 4.5c0 1.397-.778 2.645-2 3.47V20l-1.964-1.178A6.7 6.7 0 0 1 16.5 19c-3.038 0-5.5-2.015-5.5-4.5s2.462-4.5 5.5-4.5"/><path d="M11.197 15.698c-.69.196-1.43.302-2.197.302a8 8 0 0 1-2.612-.432L4 17v-2.801C2.763 13.117 2 11.635 2 10c0-3.314 3.134-6 7-6c3.782 0 6.863 2.57 7 5.785v.233M10 8h.01M7 8h.01M15 14h.01M18 14h.01"/></g></symbol><use xlink:href="#ai:tabler:brand-wechat"></use>  </svg> </a><a href="/friends/" title="🧑🏿‍🚒 Friends" rel="noopener" class="has-tooltip active" style="color: #06a878"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:message-chatbot-filled">  <symbol id="ai:tabler:message-chatbot-filled"><path fill="currentColor" d="M18 3a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4h-4.724l-4.762 2.857a1 1 0 0 1-1.508-.743L7 21v-2H6a4 4 0 0 1-3.995-3.8L2 15V7a4 4 0 0 1 4-4zm-2.8 9.286a1 1 0 0 0-1.414.014a2.5 2.5 0 0 1-3.572 0a1 1 0 0 0-1.428 1.4a4.5 4.5 0 0 0 6.428 0a1 1 0 0 0-.014-1.414M9.51 8H9.5a1 1 0 1 0 0 2h.01a1 1 0 0 0 0-2m5 0h-.01a1 1 0 0 0 0 2h.01a1 1 0 0 0 0-2"/></symbol><use xlink:href="#ai:tabler:message-chatbot-filled"></use>  </svg> </a><a href="/archives/" title="📂 Archives" rel="noopener" class="has-tooltip active" style="color: var(--title-color)"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:archive-filled">  <symbol id="ai:tabler:archive-filled"><path fill="currentColor" d="M2 5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2m17 4c.513 0 .936.463.993 1.06l.007.14v7.2c0 1.917-1.249 3.484-2.824 3.594L17 21H7c-1.598 0-2.904-1.499-2.995-3.388L4 17.4v-7.2C4 9.537 4.448 9 5 9zm-5 2h-4l-.117.007a1 1 0 0 0 0 1.986L10 13h4l.117-.007a1 1 0 0 0 0-1.986z"/></symbol><use xlink:href="#ai:tabler:archive-filled"></use>  </svg> </a><a href="/tags/" title="🏷️ tags" rel="noopener" class="has-tooltip active"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="tabler:tags">  <symbol id="ai:tabler:tags"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592-3.592a2.41 2.41 0 0 0 0-3.408l-5.71-5.71A2 2 0 0 0 9.172 6H5a2 2 0 0 0-2 2"/><path d="m18 19l1.592-1.592a4.82 4.82 0 0 0 0-6.816L15 6m-8 4h-.01"/></g></symbol><use xlink:href="#ai:tabler:tags"></use>  </svg> </a> <span>/</span> <a href="//qq.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #12b7f5"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="simple-icons:tencentqq">  <symbol id="ai:simple-icons:tencentqq"><path fill="currentColor" d="M21.395 15.035a40 40 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a39 39 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673c.54.065 2.103-2.472 2.103-2.472c0 1.469.756 3.387 2.394 4.771c-.612.188-1.363.479-1.845.835c-.434.32-.379.646-.301.778c.343.578 5.883.369 7.482.189c1.6.18 7.14.389 7.483-.189c.078-.132.132-.458-.301-.778c-.483-.356-1.233-.646-1.846-.836c1.637-1.384 2.393-3.302 2.393-4.771c0 0 1.563 2.537 2.103 2.472c.251-.03.581-1.39-.438-4.673"/></symbol><use xlink:href="#ai:simple-icons:tencentqq"></use>  </svg> </a><a href="//twitter.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #1da1f2"> <svg width="1.23em" height="1em" viewBox="0 0 256 209" data-icon="logos:twitter">  <symbol id="ai:logos:twitter"><path fill="#55acee" d="M256 25.45a105 105 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.2 105.2 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.3 52.3 0 0 1-23.79-6.57q-.004.33-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.6 52.6 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435q0-3.417-.152-6.795A106.8 106.8 0 0 0 256 25.45"/></symbol><use xlink:href="#ai:logos:twitter"></use>  </svg> </a><a href="//t.me/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #179cde"> <svg width="1em" height="1em" viewBox="0 0 256 256" data-icon="logos:telegram">  <symbol id="ai:logos:telegram"><defs><linearGradient id="logosTelegram0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#2AABEE"/><stop offset="100%" stop-color="#229ED9"/></linearGradient></defs><path fill="url(#logosTelegram0)" d="M128 0C94.06 0 61.48 13.494 37.5 37.49A128.04 128.04 0 0 0 0 128c0 33.934 13.5 66.514 37.5 90.51C61.48 242.506 94.06 256 128 256s66.52-13.494 90.5-37.49c24-23.996 37.5-56.576 37.5-90.51s-13.5-66.514-37.5-90.51C194.52 13.494 161.94 0 128 0"/><path fill="#FFF" d="M57.94 126.648q55.98-24.384 74.64-32.152c35.56-14.786 42.94-17.354 47.76-17.441c1.06-.017 3.42.245 4.96 1.49c1.28 1.05 1.64 2.47 1.82 3.467c.16.996.38 3.266.2 5.038c-1.92 20.24-10.26 69.356-14.5 92.026c-1.78 9.592-5.32 12.808-8.74 13.122c-7.44.684-13.08-4.912-20.28-9.63c-11.26-7.386-17.62-11.982-28.56-19.188c-12.64-8.328-4.44-12.906 2.76-20.386c1.88-1.958 34.64-31.748 35.26-34.45c.08-.338.16-1.598-.6-2.262c-.74-.666-1.84-.438-2.64-.258c-1.14.256-19.12 12.152-54 35.686c-5.1 3.508-9.72 5.218-13.88 5.128c-4.56-.098-13.36-2.584-19.9-4.708c-8-2.606-14.38-3.984-13.82-8.41c.28-2.304 3.46-4.662 9.52-7.072"/></symbol><use xlink:href="#ai:logos:telegram"></use>  </svg> </a><a href="//github.com/spencerwooo" target="_blank" title="🔗 @spencerwooo" rel="noopener" class="has-tooltip active" style="color: var(--title-color)"> <svg width="1em" height="1em" viewBox="0 0 24 24" data-icon="simple-icons:github">  <symbol id="ai:simple-icons:github"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></symbol><use xlink:href="#ai:simple-icons:github"></use>  </svg> </a><a href="//youtube.com/realSpencerWoo" target="_blank" title="🔗 @realSpencerWoo" rel="noopener" class="has-tooltip active" style="color: #ff0000"> <svg width="1.43em" height="1em" viewBox="0 0 256 180" data-icon="logos:youtube-icon">  <symbol id="ai:logos:youtube-icon"><path fill="red" d="M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134"/><path fill="#FFF" d="m102.421 128.06l66.328-38.418l-66.328-38.418z"/></symbol><use xlink:href="#ai:logos:youtube-icon"></use>  </svg> </a> </p> </div><div id="waline" data-astro-cid-6z674vj5></div>   </main> <footer class="footer" data-astro-cid-sz7xmlte> <div class="footer__copyright" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>© 2017 - 2024.&nbsp;All rights reserved</span></div> <div class="footer__links" data-astro-cid-sz7xmlte><a href="https://beian.miit.gov.cn" target="_blank" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>豫ICP备20006179号</span></a></div> <div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Analytics by</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:umami">  <symbol id="ai:simple-icons:umami"><path fill="currentColor" d="M2.203 8.611H.857a.845.845 0 0 0-.841.841v.858a13 13 0 0 0-.016.6c0 6.627 5.373 12 12 12c6.527 0 11.837-5.212 11.996-11.701c0-.025.004-.05.004-.075V9.452a.845.845 0 0 0-.841-.841h-1.346c-1.159-4.329-5.112-7.521-9.805-7.521S3.363 4.282 2.203 8.611m18.444 0H3.37c1.127-3.702 4.57-6.399 8.638-6.399c4.069 0 7.512 2.697 8.639 6.399"/></symbol><use xlink:href="#ai:simple-icons:umami"></use>  </svg> <a href="//umami.is" data-astro-cid-sz7xmlte>Umami</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Runs on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:astro">  <symbol id="ai:simple-icons:astro"><path fill="currentColor" d="M8.358 20.162c-1.186-1.07-1.532-3.316-1.038-4.944c.856 1.026 2.043 1.352 3.272 1.535c1.897.283 3.76.177 5.522-.678c.202-.098.388-.229.608-.36c.166.473.209.95.151 1.437c-.14 1.185-.738 2.1-1.688 2.794c-.38.277-.782.525-1.175.787c-1.205.804-1.531 1.747-1.078 3.119l.044.148a3.16 3.16 0 0 1-1.407-1.188a3.3 3.3 0 0 1-.544-1.815c-.004-.32-.004-.642-.048-.958c-.106-.769-.472-1.113-1.161-1.133c-.707-.02-1.267.411-1.415 1.09c-.012.053-.028.104-.045.165zm-5.961-4.445s3.24-1.575 6.49-1.575l2.451-7.565c.092-.366.36-.614.662-.614s.57.248.662.614l2.45 7.565c3.85 0 6.491 1.575 6.491 1.575L16.088.727C15.93.285 15.663 0 15.303 0H8.697c-.36 0-.615.285-.784.727z"/></symbol><use xlink:href="#ai:simple-icons:astro"></use>  </svg> <a href="//astro.build" data-astro-cid-sz7xmlte>Astro</a> </div><div class="footer__links" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Deployed on</span> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="simple-icons:vercel">  <symbol id="ai:simple-icons:vercel"><path fill="currentColor" d="M24 22.525H0l12-21.05z"/></symbol><use xlink:href="#ai:simple-icons:vercel"></use>  </svg> <a href="//vercel.com" data-astro-cid-sz7xmlte>Vercel</a> </div> <div id="rss-stats" data-astro-cid-sz7xmlte>
&nbsp;&nbsp;
<a href="/rss.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>RSS</span></a> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="tabler:point-filled">  <symbol id="ai:tabler:point-filled"><path fill="currentColor" d="M12 7a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7"/></symbol><use xlink:href="#ai:tabler:point-filled"></use>  </svg> <a href="/sitemap-index.xml" data-astro-cid-sz7xmlte><span data-astro-cid-sz7xmlte>Sitemap</span></a> </div> </footer>  </div> <script>
            document.addEventListener('astro:page-load', () => {
                try {
                    // 是否启用
                    const enable = true; // 设为true以启用跳转功能
                    if (!enable) return;
                    // 中转页地址
                    const redirectPage = "/redirect/?url=";
                    // 包含的 className
                    const includeClass = ['post__content']; // 添加需要包含的类名
                    // 判断元素或其父元素是否包含指定类名
                    const hasIncludeClass = (element) => {
                        while (element) {
                            if (includeClass.some(className => element.classList.contains(className))) {
                                return true;
                            }
                            element = element.parentElement;
                        }
                        return false;
                    };
                    // 所有链接
                    const allLinks = [...document.getElementsByTagName("a")];
                    if (allLinks.length === 0) return;
                    allLinks.forEach((link) => {
                        // 检查链接是否包含 target="_blank" 属性或指定的类名
                        if (link.getAttribute("target") === "_blank" || hasIncludeClass(link)) {
                            const linkHref = link.getAttribute("href");
                            // 存在链接且非中转页
                            if (linkHref && !linkHref.includes(redirectPage)) {
                                // Base64 编码 href
                                const encodedHref = btoa(linkHref);
                                const redirectLink = `${redirectPage}${encodedHref}`;
                                // 保存原始链接
                                link.setAttribute("original-href", linkHref);
                                // 覆盖 href
                                link.setAttribute("href", redirectLink);
                                // 增加 target="_blank" 属性
                                link.setAttribute("target", "_blank");
                            }
                        }
                    });
                } catch (error) {
                    console.error("处理链接时出错：", error);
                }
            });
        </script> </body> </html>  